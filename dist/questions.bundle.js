chrome.runtime.onMessage.addListener(((e,t,n)=>{if("showQuestionsAndAnswers"===e.type){console.log("Questions in the database:",e.questions);const t=document.getElementById("questionsContainer"),n=document.getElementById("saveButtonTop"),s=document.getElementById("saveButtonBottom"),o=()=>{const n=[],s=t.getElementsByClassName("question");for(let t=0;t<s.length;t++){const o=s[t],a=o.querySelector("h3").textContent,r=e.questions[t].answerType;let d;if("textarea"===r)d=o.querySelector("textarea").value;else if("dropdown"===r)d=o.querySelector("select").value;else if("radio"===r){const e=o.querySelector(`input[name="question-${a}"]:checked`);d=e?e.value:null}else"number"===r&&(d=o.querySelector('input[type="number"]').value);const l={...e.questions[t],userAnswer:d};n.push(l)}chrome.storage.sync.set({questions:n},(()=>{console.log("Answers updated in the storage.")}))};n.addEventListener("click",o),s.addEventListener("click",o),e.questions.forEach(((e,n)=>{const s=document.createElement("div");s.classList.add("question");const o=document.createElement("h3");if(o.textContent=e.question,s.appendChild(o),"textarea"===e.answerType){const t=document.createElement("textarea");t.setAttribute("placeholder","Enter your answer here"),t.value=e.userAnswer||"",s.appendChild(t)}else if("dropdown"===e.answerType){const t=document.createElement("select"),n=document.createElement("option");n.textContent="Select an option",n.disabled=!0,n.selected=!e.userAnswer,t.appendChild(n),e.options.forEach((n=>{const s=document.createElement("option");s.textContent=n,s.value=n,s.selected=n===e.userAnswer,t.appendChild(s)})),s.appendChild(t)}else if("radio"===e.answerType){const t=document.createElement("div");t.classList.add("options"),e.options.forEach((n=>{const s=document.createElement("div"),o=document.createElement("input");o.type="radio",o.name=`question-${e.question}`,o.value=n,o.checked=n===e.userAnswer;const a=document.createElement("label");a.textContent=n,s.appendChild(o),s.appendChild(a),t.appendChild(s)})),s.appendChild(t)}else if("number"===e.answerType){const t=document.createElement("input");t.type="number",t.setAttribute("placeholder","Enter a number"),t.value=e.userAnswer||"",s.appendChild(t)}t.appendChild(s)}))}}));